(function(f,g){'object'==typeof exports&&'object'==typeof module?module.exports=g():'function'==typeof define&&define.amd?define('BookKeeper',[],g):'object'==typeof exports?exports.BookKeeper=g():f.BookKeeper=g()})(this,function(){return function(c){function f(h){if(g[h])return g[h].exports;var l=g[h]={exports:{},id:h,loaded:!1};return c[h].call(l.exports,l,l.exports,f),l.loaded=!0,l.exports}var g={};return f.m=c,f.c=g,f.p='',f(0)}([function(c,f,g){'use strict';Object.defineProperty(f,'__esModule',{value:!0});var h=g(1);f.ACCOUNT_TYPE=h.default;var l=g(2);f.BankruptError=l.default;var m=g(3);f.ChartOfAccounts=m.default;var n=g(8);f.Period=n.default},function(c,f){'use strict';Object.defineProperty(f,'__esModule',{value:!0});var g;(function(h){h[h.DEBIT_NORMAL=0]='DEBIT_NORMAL',h[h.CREDIT_NORMAL=1]='CREDIT_NORMAL'})(g||(g={})),f.default=g},function(c,f){'use strict';var g=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,n){m.__proto__=n}||function(m,n){for(var o in n)n.hasOwnProperty(o)&&(m[o]=n[o])};return function(m,n){function o(){this.constructor=m}l(m,n),m.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(f,'__esModule',{value:!0});var h=function(l){function m(n,o){var q=l.call(this,n)||this;return q.period=o,q}return g(m,l),m}(Error);f.default=h},function(c,f,g){'use strict';Object.defineProperty(f,'__esModule',{value:!0});var h=g(1),l=g(4),m=g(5),n=function(){function o(){this.assets=new m.default('Assets',h.default.DEBIT_NORMAL),this.liabilities=new m.default('Liabilities',h.default.CREDIT_NORMAL),this.equity=new m.default('Equity',h.default.CREDIT_NORMAL),this.income=new m.default('Income',h.default.CREDIT_NORMAL),this.expenses=new m.default('Expenses',h.default.DEBIT_NORMAL),this.changesToEquity=new m.default('Changes to Equity',h.default.DEBIT_NORMAL),this.generalLedger=new m.default('GeneralLedger',h.default.DEBIT_NORMAL,[this.assets,this.liabilities,this.equity,this.income,this.expenses,this.changesToEquity])}return o.prototype.toString=function(){var q=l.formatSnapshots({gl:[l.snapshotAccount(this.generalLedger)]});return q.gl.join('\n')},o}();f.default=n},function(c,f,g){'use strict';Object.defineProperty(f,'__esModule',{value:!0});var h=g(5),l=function(q){try{return q.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}catch(r){if('RangeError'!==r.name)throw r}return q.toFixed(2)};f.formatCurrency=l;var m=function(q){var r={balance:q.balance,name:q.name,subAccounts:[],subAccountsByName:{}};if(q instanceof h.default)for(var t=0,u=q.subAccounts;t<u.length;t++){var w=u[t],x=m(w);r.subAccounts.push(x),r.subAccountsByName[w.name]=x}return r};f.snapshotAccount=m;f.snapshotBalance=function(q,r){return{name:q,balance:r,subAccounts:[],subAccountsByName:{}}};f.formatSnapshots=function(q){var r={},s=0,t=0;Object.keys(q).forEach(function(y){r[y]=[];for(var C,z=function(D,E){void 0===E&&(E='');var F=D.balance,G={name:E+D.name,balance:F,balanceStr:l(F)};G.balanceStr=0>F?G.balanceStr.replace(/-/,'(')+')':' '+G.balanceStr+' ',s=Math.max(s,G.name.length),t=Math.max(t,G.balanceStr.length),r[y].push(G);for(var J,H=0,I=D.subAccounts;H<I.length;H++)J=I[H],z(J,E+'  ')},A=0,B=q[y];A<B.length;A++)C=B[A],z(C)});for(var u='';u.length<s;)u+=' ';for(var w='';w.length<t;)w+=' ';var x={};return Object.keys(q).forEach(function(y){x[y]=r[y].map(function(z){var A='';return A+=(z.name+u).slice(0,s)+' ',A+='$'+(w+z.balanceStr).slice(-t),A})}),x}},function(c,f,g){'use strict';var h=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,r){q.__proto__=r}||function(q,r){for(var s in r)r.hasOwnProperty(s)&&(q[s]=r[s])};return function(q,r){function s(){this.constructor=q}o(q,r),q.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(f,'__esModule',{value:!0});var l=g(6),m=g(7),n=function(o){function q(r,s,t){void 0===t&&(t=[]);var u=o.call(this,r,s)||this;return u.name=r,u.defaultSubAccountType=s,u.subAccounts=t,u}return h(q,o),Object.defineProperty(q.prototype,'debits',{get:function(){return this.subAccounts.reduce(function(r,s){return r.concat(s.debits)},[])},enumerable:!0,configurable:!0}),Object.defineProperty(q.prototype,'credits',{get:function(){return this.subAccounts.reduce(function(r,s){return r.concat(s.credits)},[])},enumerable:!0,configurable:!0}),Object.defineProperty(q.prototype,'balance',{get:function(){var r=this;return this.subAccounts.reduce(function(s,t){return s+(t instanceof m.default&&t.accountType!==r.accountType?-t.balance:t.balance)},0)},enumerable:!0,configurable:!0}),q.prototype.subAccount=function(r,s,t){void 0===s&&(s=!1),void 0===t&&(t=this.accountType);var u;return u=s?new q(r,t):new m.default(r,t),this.subAccounts.push(u),u},q.prototype.eachAccount=function(r){for(var u,s=0,t=this.subAccounts;s<t.length;s++)if(u=t[s],u instanceof q){var w=u;w.eachAccount(r)}else r(u)},q}(l.default);f.default=n},function(c,f){'use strict';Object.defineProperty(f,'__esModule',{value:!0});var g=function(){function h(l,m){this.name=l,this.accountType=m}return h.prototype.toString=function(){return this.name+'\t$'+this.balance.toFixed(2)},h.prototype.print=function(){for(var l=0,m=[],n=this.balance.toFixed(2),o=0,q=this.debits;o<q.length;o++){var r=q[o],s=''+this.debits[r].toFixed(2);l=Math.max(l,s.length),m.push(s)}for(var t=[],u=0,w=this.credits;u<w.length;u++){var r=w[u],s=''+this.credits[r].toFixed(2);l=Math.max(l,s.length),t.push(s)}l=Math.max(n.length,l);for(var x='';x.length<l;)x+=' ';for(var r,y='Debits:\n',z=0,A=m;z<A.length;z++)r=A[z],y+='\t$'+(x+r).slice(-l)+'\n';y+='Credits:\n';for(var r,B=0,C=t;B<C.length;B++)r=C[B],y+='\t$'+(x+r).slice(-l)+'\n';return y+='Balance:\n',y+='\t$'+(x+n).slice(-l)+'\n',y},h}();f.default=g},function(c,f,g){'use strict';var h=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,r){q.__proto__=r}||function(q,r){for(var s in r)r.hasOwnProperty(s)&&(q[s]=r[s])};return function(q,r){function s(){this.constructor=q}o(q,r),q.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(f,'__esModule',{value:!0});var l=g(6),m=g(1),n=function(o){function q(){var r=null!==o&&o.apply(this,arguments)||this;return r.debits=[],r.credits=[],r.debitTotal=0,r.creditTotal=0,r.cachedBalance=0,r}return h(q,o),q.prototype.debit=function(r){this.debits.push(r),this.debitTotal+=r,this.cachedBalance+=this.accountType===m.default.DEBIT_NORMAL?r:-r},q.prototype.credit=function(r){this.credits.push(r),this.creditTotal+=r,this.cachedBalance+=this.accountType===m.default.CREDIT_NORMAL?r:-r},Object.defineProperty(q.prototype,'balance',{get:function(){return this.cachedBalance},enumerable:!0,configurable:!0}),q}(l.default);f.default=n},function(c,f,g){'use strict';Object.defineProperty(f,'__esModule',{value:!0});var h=g(9),l=g(10),m=g(11),n=function(){function o(q,r,s){this.period=q,this.coa=r,this.journal=[],this.closed=!1,this.finStmts={balanceSheet:null,incomeStatement:null},this.autoClose=3<=arguments.length?s:function(){throw new Error('You must either provide an autoClose function at instantiation or close explicitly prior to accessing financial statements')}}return o.prototype.close=function(q){var r=new l.default(this.coa);1<=arguments.length?q():this.autoClose();for(var w,s=[this.coa.income,this.coa.expenses],t=0,u=s;t<u.length;t++)if(w=u[t],0!==w.balance)throw new Error('Income Statement account \''+w.name+'\' has non-zero balance $'+w.balance+' after close');var x=new h.default(this.coa);this.closed=!0,this.finStmts={incomeStatement:r,balanceSheet:x}},Object.defineProperty(o.prototype,'financialStatements',{get:function(){return this.finStmts},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,'isClosed',{get:function(){return this.closed},enumerable:!0,configurable:!0}),o.prototype.journalEntry=function(q,r,s,t){this.compoundJournalEntry(q,[{amount:r,account:s}],[{amount:r,account:t}])},o.prototype.compoundJournalEntry=function(q,r,s){if(this.closed)throw new Error('This period has already been closed. You may not add any additional journal entires.');this.journal.push(new m.default(q,r,s))},Object.defineProperty(o.prototype,'balanceSheet',{get:function(){return!1===this.closed&&this.close(this.autoClose),this.finStmts.balanceSheet},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,'incomeStatement',{get:function(){return!1===this.closed&&this.close(this.autoClose),this.finStmts.incomeStatement},enumerable:!0,configurable:!0}),o.prototype.printJournal=function(){for(var t,q=['\t      Debits     Credits  Account'],r=0,s=this.journal;r<s.length;r++)t=s[r],q.push(t.print(12,2,'\t'));return q.join('\n')},o.prototype.toString=function(){return this.printJournal()},o}();f.default=n},function(c,f,g){'use strict';Object.defineProperty(f,'__esModule',{value:!0});var h=g(4),l=function(){function m(n){this.assets=h.snapshotAccount(n.assets),this.liabilities=h.snapshotAccount(n.liabilities),this.equity=h.snapshotAccount(n.equity),this.netWorth=this.assets.balance-this.liabilities.balance}return m.prototype.toString=function(){var n=h.formatSnapshots({assets:[this.assets],equity:[this.equity],liabilities:[this.liabilities],netWorth:[h.snapshotBalance('Net Worth',this.netWorth)]});return n.assets.join('\n')+'\n'+n.liabilities.join('\n')+'\n'+n.netWorth.join('\n')+'\n'+n.equity.join('\n')+'\n'},m}();f.default=l},function(c,f,g){'use strict';Object.defineProperty(f,'__esModule',{value:!0});var h=g(4),l=function(){function m(n){this.income=h.snapshotAccount(n.income),this.expenses=h.snapshotAccount(n.expenses),this.changesToEquity=h.snapshotAccount(n.changesToEquity),this.netIncome=this.income.balance-this.expenses.balance}return m.prototype.toString=function(){var n=h.formatSnapshots({changesToEquity:[this.changesToEquity],expenses:[this.expenses],income:[this.income],pnl:[h.snapshotBalance('Profit/(Loss):',this.netIncome)]});return n.income.join('\n')+'\n'+n.expenses.join('\n')+'\n'+n.pnl.join('\n')+'\n'+n.changesToEquity.join('\n')+'\n'},m}();f.default=l},function(c,f){'use strict';Object.defineProperty(f,'__esModule',{value:!0});var g=function(){function h(l,m,n){this.description=l,this.debits=m,this.credits=n;for(var s,o=0,q=0,r=m;q<r.length;q++)s=r[q],o+=s.amount,s.account.debit(s.amount);for(var s,t=0,u=0,w=n;u<w.length;u++)s=w[u],t+=s.amount,s.account.credit(s.amount);if(o!==t)throw new Error('Debits ('+o+') != Credits ('+t+')')}return h.prototype.print=function(l,m,n){void 0===l&&(l=12),void 0===m&&(m=2),void 0===n&&(n='\t');for(var o='';o.length<l;)o+=' ';for(var u,q=function(y){var z=y.toLocaleString('en-US',{style:'currency',currency:'USD'});for(z=z.substring(0,Math.max(z.length,l));z.length<l;)z=' '+z;return z},r=this.description+'\n',s=0,t=this.debits;s<t.length;s++)u=t[s],r+=''+n+q(u.amount)+o+'  '+u.account.name+'\n';for(var u,w=0,x=this.credits;w<x.length;w++)u=x[w],r+=''+n+o+q(u.amount)+'  '+u.account.name+'\n';return r},h.prototype.toString=function(){return this.print()},h}();f.default=g}])});
