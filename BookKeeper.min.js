(function(c,e){'object'==typeof exports&&'object'==typeof module?module.exports=e():'function'==typeof define&&define.amd?define('BookKeeper',[],e):'object'==typeof exports?exports.BookKeeper=e():c.BookKeeper=e()})(this,function(){return function(a){function c(f){if(e[f])return e[f].exports;var g=e[f]={exports:{},id:f,loaded:!1};return a[f].call(g.exports,g,g.exports,c),g.loaded=!0,g.exports}var e={};return c.m=a,c.c=e,c.p='',c(0)}([function(a,c,e){'use strict';Object.defineProperty(c,'__esModule',{value:!0});var f=e(1),g=e(5),h=e(10),j=e(3);c.default={ChartOfAccounts:f.default,Period:g.default,BankruptError:h.default,ACCOUNT_TYPE:j.default}},function(a,c,e){'use strict';Object.defineProperty(c,'__esModule',{value:!0});var f=e(2),g=e(3),h=function(){function j(){this.generalLedger=new f.default('GeneralLedger',g.default.DEBIT_NORMAL),this.assets=this.generalLedger.subAccount('Assets',g.default.DEBIT_NORMAL),this.liabilities=this.generalLedger.subAccount('Liabilities',g.default.CREDIT_NORMAL),this.equity=this.generalLedger.subAccount('Equity',g.default.CREDIT_NORMAL),this.income=this.generalLedger.subAccount('Income',g.default.CREDIT_NORMAL),this.expenses=this.generalLedger.subAccount('Expenses',g.default.DEBIT_NORMAL)}return j.prototype.toString=function(){return this.generalLedger.print('')},j}();c.default=h},function(a,c,e){'use strict';Object.defineProperty(c,'__esModule',{value:!0});var f=e(3),g=e(4),h=function(){function j(k,l){this.name=k,this.accountType=l,this._debits=[],this._debit_total=0,this._credits=[],this._credit_total=0,this.subAccounts=[]}return j.prototype.debit=function(k){this.debits.push(k),this._debit_total+=k},Object.defineProperty(j.prototype,'debits',{get:function(){return this.subAccounts.reduce(function(k,l){return k.concat(l.debits)},this._debits)},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,'debit_total',{get:function(){return this.subAccounts.reduce(function(k,l){return k+l._debit_total},this._debit_total)},enumerable:!0,configurable:!0}),j.prototype.credit=function(k){this.credits.push(k),this._credit_total+=k},Object.defineProperty(j.prototype,'credits',{get:function(){return this.subAccounts.reduce(function(k,l){return k.concat(l.credits)},this._credits)},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,'credit_total',{get:function(){return this.subAccounts.reduce(function(k,l){return k+l._credit_total},this._credit_total)},enumerable:!0,configurable:!0}),j.prototype.subAccount=function(k,l){2>arguments.length&&(l=this.accountType);var m=new j(k,l);return this.subAccounts.push(m),m},j.prototype._balance=function(){var k;switch(this.accountType){case f.default.CREDIT_NORMAL:k=this._credit_total-this._debit_total;break;case f.default.DEBIT_NORMAL:k=this._debit_total-this._credit_total;break;default:throw new Error('Unknown account type: '+this.accountType);}return k},Object.defineProperty(j.prototype,'balance',{get:function(){return this.subAccounts.reduce(function(k,l){return k+l.balance},this._balance())},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,'statement',{get:function(){for(var k={balance:this._balance(),subAccounts:{}},l=0;l<this.subAccounts.length;l++)k.subAccounts[this.subAccounts[l].name]=this.subAccounts[l].statement,k.balance+=k.subAccounts[this.subAccounts[l].name].balance;return k},enumerable:!0,configurable:!0}),j.prototype._prepForPrint=function(k,l){void 0===k&&(k=''),void 0===l&&(l='  ');for(var m=[{name:''+k+this.name,balance:this.balance}],n=0;n<this.subAccounts.length;n++)m=m.concat(this.subAccounts[n]._prepForPrint(''+k+l,l));return m},j.prototype.print=function(k,l){return void 0===k&&(k=''),void 0===l&&(l='  '),g.printReport(this._prepForPrint(k,l))},j.prototype.toString=function(){return this.print()},j}();c.default=h},function(a,c){'use strict';Object.defineProperty(c,'__esModule',{value:!0});var e;(function(f){f[f.DEBIT_NORMAL=0]='DEBIT_NORMAL',f[f.CREDIT_NORMAL=1]='CREDIT_NORMAL'})(e||(e={})),c.default=e},function(a,c){'use strict';Object.defineProperty(c,'__esModule',{value:!0});var f=function(h){var j=0,k=0;return h.map(function(l){var m=l.balance.toLocaleString('en-US',{style:'currency',currency:'USD'});0>l.balance&&(m.replace(/-/,'('),m+=')');var n={name:l.name,balance:m};return j=Math.max(j,l.name.length),k=Math.max(k,n.balance.length),n}).map(function(l){for(var m=l.name;m.length<j;)m+=' ';for(var n=k-l.balance.length,o='';o.length<n;)o+=' ';var q=l.balance.replace(/\$/,'$'+o);return m.substring(0,j)+'\t'+q}).join('\n')};c.printReport=f;var g=function(){function h(j,k){for(var l in this.balance=j,this.subAccounts={},k){k[l];this.subAccounts[k[l].name]=k[l].statement}}return h.prototype.print=function(j,k){var l=this;void 0===j&&(j='Total'),void 0===k&&(k=[]);var m=[];return Object.keys(this.subAccounts).forEach(function(n){m.push({name:n,balance:l.subAccounts[n].balance})}),m.push({name:j,balance:this.balance}),m=m.concat(k),f(m)},h.prototype.toString=function(){return this.print()},h}();c.default=g},function(a,c,e){'use strict';Object.defineProperty(c,'__esModule',{value:!0});var f=e(6),g=e(7),h=e(8),j=e(9),k=function(){function l(m,n,o){var q=this;this.period=m,this.coa=n,this.journal=[],this.autoClose='function'==typeof o?o:function(){var r=[{amount:n.income.balance,account:n.income}],s=[{amount:n.expenses.balance,account:n.expenses}],t=n.income.balance-n.expenses.balance;if(0<t)s.push({amount:t,account:n.equity});else if(0>t){if(n.assets.balance<-t)throw new Error('You\'re bankrupt!');r.push({amount:t,account:n.equity})}q.journalEntryComplex('Close Period',r,s)},this.closed=!1}return l.prototype.close=function(m){var n=new g.default(this.coa);m();for(var o=[this.coa.income,this.coa.expenses],q=0;q<o.length;q++)if(0!==o[q].balance)throw new Error('Income Statement account \''+o[q].name+'\' has non-zero balance $'+o[q].balance+' after close');var r=new h.default(this.coa);this.closed=!0,this.financialStatements=new j.default(n,r)},l.prototype.journalEntry=function(m,n,o,q){this.journalEntryComplex(m,[{amount:n,account:o}],[{amount:n,account:q}])},l.prototype.journalEntryComplex=function(m,n,o){this.journal.push(new f.default(m,n,o))},Object.defineProperty(l.prototype,'balanceSheet',{get:function(){return!1===this.closed&&this.close(this.autoClose),this.financialStatements.balanceSheet},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,'incomeStatement',{get:function(){return!1===this.closed&&this.close(this.autoClose),this.financialStatements.incomeStatement},enumerable:!0,configurable:!0}),l.prototype.printJournal=function(){for(var m=['\t      Debits     Credits  Account'],n=0;n<this.journal.length;n++)m.push(this.journal[n].print(12,2,'\t'));return m.join('\n')},l.prototype.toString=function(){return this.printJournal()},l}();c.default=k},function(a,c){'use strict';Object.defineProperty(c,'__esModule',{value:!0});var e=function(){function f(g,h,j){this.description=g,this.debits=h,this.credits=j;for(var k=0,l=0;l<h.length;l++)k+=h[l].amount,h[l].account.debit(h[l].amount);for(var m=0,l=0;l<j.length;l++)m+=j[l].amount,j[l].account.credit(j[l].amount);if(k!=m)throw new Error('Debits ('+k+') != Credits ('+m+')')}return f.prototype.print=function(g,h,j){void 0===g&&(g=12),void 0===h&&(h=2),void 0===j&&(j='\t');for(var k='';k.length<g;)k+=' ';for(var o,l=function(q){var r=q.toLocaleString('en-US',{style:'currency',currency:'USD'});for(r=r.substring(0,Math.max(r.length,g));r.length<g;)r=' '+r;return r},m=this.description+'\n',n=0;n<this.debits.length;n++)o=this.debits[n],m+=''+j+l(o.amount)+k+'  '+o.account.name+'\n';for(var o,n=0;n<this.credits.length;n++)o=this.credits[n],m+=''+j+k+l(o.amount)+'  '+o.account.name+'\n';return m},f.prototype.toString=function(){return this.print()},f}();c.default=e},function(a,c,e){'use strict';var f=this&&this.__extends||function(){var j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,l){k.__proto__=l}||function(k,l){for(var m in l)l.hasOwnProperty(m)&&(k[m]=l[m])};return function(k,l){function m(){this.constructor=k}j(k,l),k.prototype=null===l?Object.create(l):(m.prototype=l.prototype,new m)}}();Object.defineProperty(c,'__esModule',{value:!0});var g=e(4),h=function(j){function k(l){var m=j.call(this,l.income.balance-l.expenses.balance,[l.income,l.expenses])||this;return m._netIncome=0,m}return f(k,j),Object.defineProperty(k.prototype,'netIncome',{get:function(){return this.balance},enumerable:!0,configurable:!0}),k.prototype.toString=function(){return this.print('Profit/(Loss)')},k}(g.default);c.default=h},function(a,c,e){'use strict';var f=this&&this.__extends||function(){var j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,l){k.__proto__=l}||function(k,l){for(var m in l)l.hasOwnProperty(m)&&(k[m]=l[m])};return function(k,l){function m(){this.constructor=k}j(k,l),k.prototype=null===l?Object.create(l):(m.prototype=l.prototype,new m)}}();Object.defineProperty(c,'__esModule',{value:!0});var g=e(4),h=function(j){function k(l){var m=j.call(this,l.assets.balance-l.liabilities.balance,[l.assets,l.liabilities])||this;return m.coa=l,m._netWorth=0,m}return f(k,j),Object.defineProperty(k.prototype,'netWorth',{get:function(){return this.balance},enumerable:!0,configurable:!0}),k.prototype.toString=function(){return this.print('Net Worth',[this.coa.equity])},k}(g.default);c.default=h},function(a,c){'use strict';Object.defineProperty(c,'__esModule',{value:!0});var e=function(){return function(g,h){this.incomeStatement=g,this.balanceSheet=h}}();c.default=e},function(a,c){'use strict';var e=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,j){h.__proto__=j}||function(h,j){for(var k in j)j.hasOwnProperty(k)&&(h[k]=j[k])};return function(h,j){function k(){this.constructor=h}g(h,j),h.prototype=null===j?Object.create(j):(k.prototype=j.prototype,new k)}}();Object.defineProperty(c,'__esModule',{value:!0});var f=function(g){function h(j,k){var l=g.call(this,j)||this;return l.period=k,l}return e(h,g),h}(Error);c.default=f}])});
